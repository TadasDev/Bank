{% extends 'base.html.twig' %}

{% block title %}Investment Dashboard - InvestmentPro{% endblock %}

{% block body %}
    <div class="container-fluid px-4">
        <!-- Welcome Section -->
        <div class="d-flex justify-content-between align-items-center mb-4">
            <div>
                <h1 class="display-6 fw-semibold mb-1">Welcome, {{ app.user.firstName }}</h1>
                <p class="text-muted fs-5 mb-0">Track your real estate investment portfolio</p>
            </div>
            <div class="d-flex gap-3">
                <button class="btn btn-outline-success">
                    <i class="bi bi-file-earmark-pdf me-2"></i>Investment Report
                </button>
                <button class="btn btn-success">
                    <i class="bi bi-building-add me-2"></i>Browse Projects
                </button>
            </div>
        </div>

        {% set hasInvestments = false %}  {# This should be replaced with actual logic from controller #}

        {% if not hasInvestments %}
        <!-- Welcome Message for New Users -->
        <div class="card border-0 shadow-sm mb-4">
            <div class="card-body text-center py-5">
                <div class="rounded-circle bg-success bg-opacity-10 p-4 d-inline-block mb-3">
                    <i class="bi bi-wallet2 text-success fs-1"></i>
                </div>
                <h2 class="fs-4 fw-semibold mb-3">Welcome to InvestmentPro!</h2>
                <p class="text-muted mb-2">To start investing in real estate projects, you'll need to connect your Paysera account.</p>
                <p class="text-muted mb-4">This allows you to securely manage your investments and receive returns directly.</p>
                <div class="d-flex justify-content-center gap-3">
                    <button class="btn btn-success btn-lg px-4">
                        <i class="bi bi-link-45deg me-2"></i>Connect Paysera Account
                    </button>
                    <button class="btn btn-outline-secondary btn-lg px-4">
                        <i class="bi bi-info-circle me-2"></i>Learn More
                    </button>
                </div>
            </div>
        </div>
        {% endif %}

        <!-- Stats Cards -->
        {% if hasInvestments %}
        <div class="row g-4 mb-4">
            <div class="col-12 col-sm-6 col-xl-3">
                <div class="card border-0 shadow-sm">
                    <div class="card-body p-4">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <div class="rounded-circle bg-success bg-opacity-10 p-3">
                                <i class="bi bi-piggy-bank text-success fs-4"></i>
                            </div>
                            <span class="badge bg-success bg-opacity-10 text-success">12 Projects</span>
                        </div>
                        <h3 class="fs-2 fw-bold mb-1">$50,000</h3>
                        <p class="text-muted mb-0">Total Invested</p>
                    </div>
                </div>
            </div>
            <div class="col-12 col-sm-6 col-xl-3">
                <div class="card border-0 shadow-sm">
                    <div class="card-body p-4">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <div class="rounded-circle bg-primary bg-opacity-10 p-3">
                                <i class="bi bi-graph-up-arrow text-primary fs-4"></i>
                            </div>
                            <span class="badge bg-primary bg-opacity-10 text-primary">+18.5%</span>
                        </div>
                        <h3 class="fs-2 fw-bold mb-1">$9,250</h3>
                        <p class="text-muted mb-0">Total Returns</p>
                    </div>
                </div>
            </div>
            <div class="col-12 col-sm-6 col-xl-3">
                <div class="card border-0 shadow-sm">
                    <div class="card-body p-4">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <div class="rounded-circle bg-warning bg-opacity-10 p-3">
                                <i class="bi bi-cash-stack text-warning fs-4"></i>
                            </div>
                            <span class="badge bg-warning bg-opacity-10 text-warning">Monthly</span>
                        </div>
                        <h3 class="fs-2 fw-bold mb-1">$850</h3>
                        <p class="text-muted mb-0">Monthly Income</p>
                    </div>
                </div>
            </div>
            <div class="col-12 col-sm-6 col-xl-3">
                <div class="card border-0 shadow-sm">
                    <div class="card-body p-4">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <div class="rounded-circle bg-info bg-opacity-10 p-3">
                                <i class="bi bi-buildings text-info fs-4"></i>
                            </div>
                            <span class="badge bg-info bg-opacity-10 text-info">Available</span>
                        </div>
                        <h3 class="fs-2 fw-bold mb-1">5</h3>
                        <p class="text-muted mb-0">New Opportunities</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Investment Projects & Opportunities -->
        <div class="row g-4">
            <!-- Active Investments -->
            <div class="col-12 col-xl-8">
                <div class="card border-0 shadow-sm">
                    <div class="card-header bg-white border-0 py-3">
                        <div class="d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Your Active Investments</h5>
                            <button class="btn btn-outline-secondary btn-sm">View All Projects</button>
                        </div>
                    </div>
                    <div class="card-body p-0">
                        <div class="list-group list-group-flush">
                            <div class="list-group-item px-4 py-3">
                                <div class="d-flex align-items-center">
                                    <div class="rounded bg-success bg-opacity-10 p-3 me-3">
                                        <i class="bi bi-building text-success"></i>
                                    </div>
                                    <div class="flex-grow-1">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <h6 class="mb-1">Downtown Luxury Complex</h6>
                                            <span class="badge bg-success">Funded</span>
                                        </div>
                                        <p class="text-muted small mb-0">Investment: $15,000 | Expected ROI: 12%</p>
                                    </div>
                                    <div class="text-end ms-3">
                                        <div class="fw-bold text-success">+$450</div>
                                        <small class="text-muted">Last Month</small>
                                    </div>
                                </div>
                            </div>
                            <div class="list-group-item px-4 py-3">
                                <div class="d-flex align-items-center">
                                    <div class="rounded bg-primary bg-opacity-10 p-3 me-3">
                                        <i class="bi bi-houses text-primary"></i>
                                    </div>
                                    <div class="flex-grow-1">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <h6 class="mb-1">Residential Development</h6>
                                            <span class="badge bg-primary">In Progress</span>
                                        </div>
                                        <p class="text-muted small mb-0">Investment: $20,000 | Expected ROI: 15%</p>
                                    </div>
                                    <div class="text-end ms-3">
                                        <div class="fw-bold text-primary">85%</div>
                                        <small class="text-muted">Complete</small>
                                    </div>
                                </div>
                            </div>
                            <div class="list-group-item px-4 py-3">
                                <div class="d-flex align-items-center">
                                    <div class="rounded bg-warning bg-opacity-10 p-3 me-3">
                                        <i class="bi bi-shop text-warning"></i>
                                    </div>
                                    <div class="flex-grow-1">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <h6 class="mb-1">Retail Plaza Project</h6>
                                            <span class="badge bg-warning">Funding</span>
                                        </div>
                                        <p class="text-muted small mb-0">Investment: $10,000 | Expected ROI: 18%</p>
                                    </div>
                                    <div class="text-end ms-3">
                                        <div class="fw-bold text-warning">65%</div>
                                        <small class="text-muted">Funded</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Investment Analytics -->
            <div class="col-12 col-xl-4">
                <div class="card border-0 shadow-sm">
                    <div class="card-header bg-white border-0 py-3">
                        <h5 class="mb-0">Portfolio Breakdown</h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-4">
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <span class="text-muted">Residential Projects</span>
                                <span class="fw-semibold">40%</span>
                            </div>
                            <div class="progress" style="height: 8px;">
                                <div class="progress-bar bg-success" role="progressbar" style="width: 40%"></div>
                            </div>
                        </div>
                        <div class="mb-4">
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <span class="text-muted">Commercial Projects</span>
                                <span class="fw-semibold">35%</span>
                            </div>
                            <div class="progress" style="height: 8px;">
                                <div class="progress-bar bg-primary" role="progressbar" style="width: 35%"></div>
                            </div>
                        </div>
                        <div class="mb-4">
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <span class="text-muted">Mixed-Use Development</span>
                                <span class="fw-semibold">15%</span>
                            </div>
                            <div class="progress" style="height: 8px;">
                                <div class="progress-bar bg-warning" role="progressbar" style="width: 15%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <span class="text-muted">Land Development</span>
                                <span class="fw-semibold">10%</span>
                            </div>
                            <div class="progress" style="height: 8px;">
                                <div class="progress-bar bg-info" role="progressbar" style="width: 10%"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- New Investment Opportunities -->
                <div class="card border-0 shadow-sm mt-4">
                    <div class="card-header bg-white border-0 py-3">
                        <h5 class="mb-0">Hot Opportunities</h5>
                    </div>
                    <div class="card-body">
                        <div class="d-flex align-items-center mb-3">
                            <div class="rounded bg-success bg-opacity-10 p-2 me-3">
                                <i class="bi bi-building-up text-success"></i>
                            </div>
                            <div>
                                <h6 class="mb-1">City Center Development</h6>
                                <small class="text-muted">Min Investment: $5,000</small>
                            </div>
                            <div class="ms-auto">
                                <span class="badge bg-success">18% ROI</span>
                            </div>
                        </div>
                        <div class="d-flex align-items-center">
                            <div class="rounded bg-primary bg-opacity-10 p-2 me-3">
                                <i class="bi bi-house-up text-primary"></i>
                            </div>
                            <div>
                                <h6 class="mb-1">Suburban Housing Project</h6>
                                <small class="text-muted">Min Investment: $10,000</small>
                            </div>
                            <div class="ms-auto">
                                <span class="badge bg-primary">15% ROI</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}

        {% if not hasInvestments %}
        <!-- Available Projects for New Users -->
        <div class="card border-0 shadow-sm">
            <div class="card-header bg-white border-0 py-3">
                <h5 class="mb-0">Available Investment Opportunities</h5>
            </div>
            <div class="card-body p-0">
                <div class="list-group list-group-flush">
                    <div class="list-group-item px-4 py-3">
                        <div class="d-flex align-items-center">
                            <div class="rounded bg-success bg-opacity-10 p-3 me-3">
                                <i class="bi bi-building-up text-success"></i>
                            </div>
                            <div class="flex-grow-1">
                                <div class="d-flex justify-content-between align-items-center">
                                    <h6 class="mb-1">City Center Development</h6>
                                    <span class="badge bg-success">18% ROI</span>
                                </div>
                                <p class="text-muted small mb-0">Min Investment: $5,000 | Project Duration: 24 months</p>
                            </div>
                            <button class="btn btn-outline-success btn-sm ms-3" disabled>
                                <i class="bi bi-lock me-2"></i>Connect Account to Invest
                            </button>
                        </div>
                    </div>
                    <div class="list-group-item px-4 py-3">
                        <div class="d-flex align-items-center">
                            <div class="rounded bg-primary bg-opacity-10 p-3 me-3">
                                <i class="bi bi-house-up text-primary"></i>
                            </div>
                            <div class="flex-grow-1">
                                <div class="d-flex justify-content-between align-items-center">
                                    <h6 class="mb-1">Suburban Housing Project</h6>
                                    <span class="badge bg-primary">15% ROI</span>
                                </div>
                                <p class="text-muted small mb-0">Min Investment: $10,000 | Project Duration: 36 months</p>
                            </div>
                            <button class="btn btn-outline-success btn-sm ms-3" disabled>
                                <i class="bi bi-lock me-2"></i>Connect Account to Invest
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
{% endblock %}
